-- Script para configurar pol√≠ticas RLS del bucket property-images en Supabase Storage
-- 
-- ‚ö†Ô∏è IMPORTANTE: Este script NO se puede ejecutar directamente porque requiere permisos de superusuario
-- en la tabla storage.objects del sistema de Supabase.
--
-- ‚úÖ SOLUCI√ìN ACTUAL:
-- El c√≥digo en app/api/properties/[id]/images/route.ts ya usa el cliente admin de Supabase,
-- que bypass las pol√≠ticas RLS. Por lo tanto, este script NO es necesario para que funcione.
--
-- üìã OPCI√ìN ALTERNATIVA (si quieres configurar pol√≠ticas de Storage):
-- Si prefieres no usar el cliente admin y configurar pol√≠ticas RLS, puedes hacerlo manualmente
-- desde Supabase Dashboard:
--
-- 1. Ve a Supabase Dashboard > Storage > property-images
-- 2. Haz clic en "Policies" (o "Pol√≠ticas")
-- 3. Crea las siguientes pol√≠ticas manualmente:
--
-- POL√çTICA 1: Upload para usuarios autenticados
--   - Policy name: "Authenticated users can upload property images"
--   - Allowed operation: INSERT
--   - Target roles: authenticated
--   - USING expression: bucket_id = 'property-images'
--
-- POL√çTICA 2: Lectura para usuarios autenticados
--   - Policy name: "Authenticated users can read property images"
--   - Allowed operation: SELECT
--   - Target roles: authenticated
--   - USING expression: bucket_id = 'property-images'
--
-- POL√çTICA 3: Lectura p√∫blica (para landing)
--   - Policy name: "Public can read property images"
--   - Allowed operation: SELECT
--   - Target roles: public
--   - USING expression: bucket_id = 'property-images'
--
-- POL√çTICA 4: Actualizaci√≥n para usuarios autenticados
--   - Policy name: "Authenticated users can update property images"
--   - Allowed operation: UPDATE
--   - Target roles: authenticated
--   - USING expression: bucket_id = 'property-images'
--
-- POL√çTICA 5: Eliminaci√≥n para usuarios autenticados
--   - Policy name: "Authenticated users can delete property images"
--   - Allowed operation: DELETE
--   - Target roles: authenticated
--   - USING expression: bucket_id = 'property-images'
--
-- üìù NOTA FINAL:
-- El sistema funciona correctamente sin ejecutar este script ni configurar estas pol√≠ticas,
-- ya que el c√≥digo usa el cliente admin que tiene permisos completos.
